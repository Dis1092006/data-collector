# data-collector - Хранилище данных

----
### API справочников

* `GET /api/v1/zones` - Получить список всех зон
* `GET /api/v1/zones/:id/nodes` - Получить список всех нод указанной зоны
* `POST /api/v1/zones/:id/nodes` - Добавить ноду в указанную зону
    * _`{"name":"Нода 2"}`_
* `GET /api/v1/nodes` - Получить список всех нод
* `GET /api/v1/nodes/:id` - Получить ноду по id
* `PUT /api/v1/nodes/:id` - Обновить ноду по id
    * _`{"name":"Нода 2"}`_
* `DELETE /api/v1/nodes/:id` - Удалить ноду по id

### API истории изменений архитектуры
* `POST /api/v1/history` - Добавить запись в историю
    * _`{"date":"20160328","zone":"Рабочая зона","node":"Нода 1","server":"is19-p-app-09"}`_
* `GET /api/v1/history/:date` - Получить исторические данные за указанную дату

### API серверов

* `GET /api/v1/servers` - Получить список всех серверов, а также поиск (все параметры опциональные)
* `POST /api/v1/servers` - Добавить сервер
* `GET /api/v1/servers/:id` - Получить сервер по id
* `PUT /api/v1/servers/:id` - Обновить сервер по id
* `DELETE /api/v1/servers/:id` - Удалить сервер по id

## _данные сервера_
```
    {
        "name": "server__name",
        "alias": "server__alias",
        "zone": "zone_id" | "zone_name, [необязательный, ищется зона сначала по идентификатору, потом по имени, если не найдена, то создаётся]
        "node": "node_id" | "node_name" [необязательный, ищется нода сначала по идентификатору, потом по имени (с привязкой к зоне), если не найдена, то создаётся]
    }
```  